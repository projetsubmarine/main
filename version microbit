from microbit import *
from random import randint

dico = {}
def dict_submarine_generator(dict_submarine, nb_submarine, submarine_life):
    for element in range(nb_submarine):
        x = randint(0,4)
        y = randint(0,4)
        dict_submarine[element] = {"health" : submarine_life, "position": [x,y]}
    return dico
  
dict_submarine_generator(dico, 4, 2)

for element in range(4):
    list_sonar = dico[element]['position'] 
    print(list_sonar)
    list_identify = ['b', 'c', 'd']
    if element > 3:
        list_sonar = 'list_sonar' + str(list_identify[element])
        
def move_possible(current_position, direction):
    if  direction == 0:
        current_position = current_position 
    elif direction == 1 and current_position[1] >= 0:
        current_position[1] = int(current_position[1])  - 1
    elif direction == 2 and current_position[1] <= 4:
        current_position[1] =  int(current_position[1])  + 1
    elif direction == 3 and current_position[0] <= 4:        
        current_position[0] = int(current_position[0])  + 1
    elif direction == 4 and current_position[0] >= 0:        
        current_position[0] = int(current_position[0])  - 1
    
    return current_position
    
last_movement = 1

for element in range(4):

    sub_name = element

    print(sub_name)
    list_position = list(dico[sub_name]['position'])
    print(list_position)
    
    chance_move_freeze = randint(0, 1)
    print(chance_move_freeze)
    chance_direction_change = randint(0, 9)
    print(chance_direction_change)

    if chance_move_freeze == 1:
        
        if int(list_position[0]) == 4 and int(list_position[1]) == 4:
            if chance_direction_change != 5 and last_movement not in [2,3]:
                direction_generator = last_movement
                move_possible(list_position, direction_generator)
            else:
                direction_generator = randint(0, 2)
                direction = [0, 1, 4]
                move_possible(list_position, direction[direction_generator])        
        elif int(list_position[0]) == 0 and int(list_position[1]) == 4:            
            if chance_direction_change != 5 and last_movement not in [2,4]:
                direction_generator = last_movement
                move_possible(list_position, direction_generator)
            else:
                direction_generator = randint(0, 2)
                direction = [0, 1, 3]
                move_possible(list_position, direction[direction_generator])        
        elif int(list_position[0]) == 0 and int(list_position[1]) == 0:  
            if chance_direction_change != 5 and last_movement not in [1,4]:
                direction_generator = last_movement
                move_possible(list_position, direction_generator)
            else:
                direction_generator = randint(0, 2)
                direction = [0, 2, 3]
                move_possible(list_position, direction[direction_generator])
        
        elif int(list_position[0]) == 4 and int(list_position[1]) == 0:
            
            if chance_direction_change != 5 and last_movement not in [1,3]:
                direction_generator = last_movement
                move_possible(list_position, direction_generator)
            else:
                direction_generator = randint(0, 2)
                direction = [0, 2, 4]
                move_possible(list_position, direction[direction_generator])
        
        elif (0 < int(list_position[0]) < 4) and int(list_position[1]) == 0:
            
            if chance_direction_change != 5 and last_movement not in [1]:
                direction_generator = last_movement
                move_possible(list_position, direction_generator)
            else:
                direction_generator = randint(0, 3)
                direction = [0, 2, 3, 4]
                move_possible(list_position, direction[direction_generator])
        
        elif (0 < int(list_position[0]) < 4) and int(list_position[1]) == 4:
            
            if chance_direction_change != 5 and last_movement not in [2]:
                direction_generator = last_movement
                move_possible(list_position, direction_generator)
            else:      
                direction_generator = randint(0, 3)
                direction = [0, 1, 3, 4]
                move_possible(list_position, direction[direction_generator])
        
        elif (0 < int(list_position[1]) < 4) and int(list_position[0]) == 0:
            
            if chance_direction_change != 5 and last_movement not in [4]:
                direction_generator = last_movement
                move_possible(list_position, direction_generator)
            else:
                direction_generator = randint(0, 3)
                direction = [0, 1, 2, 3]
                move_possible(list_position, direction[direction_generator])
       
        elif (0 < int(list_position[1]) < 4) and int(list_position[0]) == 0:
            
            if chance_direction_change != 5 and last_movement not in [3]:
                direction_generator = last_movement
                move_possible(list_position, direction_generator)
            else:
                direction_generator = randint(0, 3)
                direction = [0, 1, 2, 4]
                move_possible(list_position, direction[direction_generator])
        else:
            direction_generator = randint(0, 4)            
            print(direction_generator)
            if chance_direction_change == 5:
                move_possible(list_position, direction_generator)
                
                last_movement = direction_generator
            else:
                move_possible(list_position, last_movement)                  
                last_movement = last_movement
    else:
        print('you have stayed in place')
        last_movement = last_movement
        list_sonar = 'list_sonar' + str(element)
    dico[sub_name]['position'] = list_position
    print(list_position)
dico['submarine2']['position']
